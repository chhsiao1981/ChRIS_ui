upstream chris-backend {
        server chris-backend:8000;
}

upstream dev {
        server dev:5173;
}

server {
    listen       5174;
    listen  [::]:5174;

    location /api/v7 {
        proxy_pass http://chris-backend;
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-For $remote_addr;
    }

    location /api/v1 {
        proxy_pass http://chris-backend;
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-For $remote_addr;
    }

    location /docs {
        proxy_pass http://chris-backend;
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-For $remote_addr;
    }

    location /openapi.json {
        proxy_pass http://chris-backend;
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-For $remote_addr;
    }

    location /static/rest_framework {
        proxy_pass http://chris-backend;
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-For $remote_addr;
    }

    location / {
        proxy_pass http://dev;
        proxy_set_header Host $host;
        proxy_set_header X-Forwarded-For $remote_addr;
    }
}
